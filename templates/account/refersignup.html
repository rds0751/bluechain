{% extends "account/base.html" %}

{% load i18n static %}
{% load crispy_forms_tags %}

{% block head_title %}{% trans "Signup" %}{% endblock %}

{% block body %}
<!-- background -->
<div class="coverimg h-100 w-100 top-0 start-0 position-absolute" id="image-daytime">
  <div class="overlay"></div>
  <img src="https://cdn1.epicgames.com/ue/product/Screenshot/6-1920x1080-3627ba69aaa503971982344bb19deb75.jpg?resize=1&w=1920" alt="" class="w-100" />
</div>
<!-- background ends  -->

<!-- header -->
<header class="header">
  <!-- Fixed navbar -->
  <nav class="navbar fixed-top">
      <div class="container-fluid">
          <div class="col-auto">
              <a href="landing.html" class="btn btn-link text-secondary text-center"><i class="bi bi-chevron-left"></i></a>
          </div>
          <div class="col-auto ms-2">
              <a class="navbar-brand d-block" href="#">
                  <div class="row">
                      <div class="col ps-0 align-self-center">
                          <h5 class="fw-normal text-dark">M2Plus</h5>
                          <p class="small text-secondary">Welcome onboard! Kindly be seated while we get started!</p>
                      </div>
                  </div>
              </a>
          </div>
          <div class="col-auto ms-auto">
              <button type="button" class="btn btn-link text-secondary text-center" id="addtohome"><i class="bi bi-backspace-fill me-0 me-lg-1"></i> <span class="d-none d-lg-inline-block">Back</span></button>
          </div>
      </div>
  </nav>
</header>
<!-- header ends -->


<!-- Begin page content -->
<main class="main mainheight container-fluid">
  <div class="row h-100 justify-content-center">
      <div class="col-12 mb-auto">
          <!-- time and temperature -->
          <div class="row text-white my-2">
              <div class="col">
                  <p class="display-3 mb-0"><span id="time"></span><small><span class="h4 text-uppercase" id="ampm"></span></small></p>
                  <p class="lead fw-normal" id="date"></p>
              </div>
              <div class="col-auto text-end">
                  <p class="display-3 mb-0">
                      <img src="{% static '/img/cloud-sun.png' %}" alt="" class="vm me-0 tempimage" id="tempimage" />
                      <span id="temperature">46</span><span class="h4 text-uppercase"> <sup>0</sup>C</span>
                  </p>

                  <a href="javascript:void()" class="btn btn-link text-white dd-arrow-none dropdown-toggle p-0" id="selectCity" data-bs-toggle="dropdown" aria-expanded="false">
                      <span class="h5 fw-normal" id="city">New York</span> <i class="bi bi-pencil-square small fw-light"></i>
                  </a>
                  <ul class="dropdown-menu" aria-labelledby="selectCity" id="citychange">
                      <li class="dropdown-item" data-value="New York">New York</li>
                      <li class="dropdown-item active" data-value="London">London</li>
                      <li class="dropdown-item" data-value="Qatar">Qatar</li>
                      <li class="dropdown-item" data-value="Delhi">Delhi</li>
                      <li class="dropdown-item" data-value="Sydney">Sydney</li>
                  </ul>
              </div>
          </div>
          <!-- time and temperature ends -->
      </div>
      <div class="col-12 align-self-center">
          <div class="row align-items-center justify-content-center">
              <div class="col-12 col-sm-8 col-md-6 col-lg-5 col-xl-4 col-xxl-3 text-center text-white py-3">
                  <h3 class="mb-3 mb-lg-4">Create Account</h3>
                  <p>Welcome to M2Plus</p>
                  
                    <form class="mb-4 text-start " id="signup_form" autocomplete="sedrctvghb" method="post" action="{% url 'account_signup' %}">
                      {% csrf_token %}
                      <!-- alert messages -->
                      {% if form.errors %}
                        <div class="alert alert-danger fade show d-none mb-2 global-alert text-start" role="alert">
                            <div class="row">
                              <div class="col"><strong>You might get locked for 24 Hours! Use accurate details!</div>
                          </div>
                        </div>
                      {% endif %}     
                      
                      <div class="mb-2 text-dark">
                          <div class="form-group mb-2 position-relative check-valid is-valid">
                              <div class="input-group input-group-lg">
                                  <div class="form-floating">
                                    {% if user %}
                                  <input onkeyup="this.value = this.value.toUpperCase();" style="font-size: .8rem;" type="text" value="{{ user }}" name="referal_code" placeholder="Sponsor ID" class="form-control border-start-0" id="id_username" readonly>
                                  {% endif %}
                                  <label>Sponsor ID</label>
                                </div>  
                                </div>
                              </div>
                          </div>  
                      <div class="mb-2 text-dark">
                          <div onLoad="loadUsername()" class="form-group mb-2 position-relative check-valid is-valid">
                              <div class="input-group input-group-lg">
                                  <div class="form-floating">
                                  <input style="font-size: .8rem;" value="{{name}}" placeholder="Sponsor Name" type="text" minlength="1" maxlength="150" class="form-control border-start-0" id="user_name" readonly="">
                                  <label>Sponsor Name</label>
                                </div>  
                                </div>
                              </div>
                          </div>
                      <div class="mb-2 text-dark">
                          <div class="form-group mb-2 position-relative check-valid is-valid">
                              <div class="input-group input-group-lg">
                                  <div class="form-floating">
                                  <input onkeyup="this.value = this.value.toUpperCase();" placeholder="Full Name" style="font-size: .8rem;" autocomplete="sedrctvghb" type="text" name="name" minlength="1" maxlength="150" class="form-control border-start-0" id="text-field-hero-input" autocomplete="sedrctvghb">
                                  <label>Full Name</label>
                                </div>  
                                </div>
                              </div>
                          </div>
                      <div class="mb-2 text-dark">
                          <div class="form-group mb-2 position-relative check-valid is-valid">
                              <div class="input-group input-group-lg">
                                  <div class="form-floating">
                                  <input style="font-size: .8rem;" default="+91" placeholder="Mobile" autocomplete="sedrctvghb" type="text" name="mobile" minlength="1" maxlength="150" class="form-control border-start-0" id="text-field-hero-input" autocomplete="sedrctvghb">
                                  <label>Mobile</label>
                                </div>  
                                </div>
                              </div>
                          </div>
                      <div class="mb-2 text-dark">
                          <div class="form-group mb-2 position-relative check-valid is-valid">
                              <div class="input-group input-group-lg">
                                  <div class="form-floating">
                                    <input style="font-size: .8rem;" autocomplete="sedrctvghb" type="email" name="email" placeholder="Email" class="form-control border-start-0" id="text-field-hero-input">
                                    <label>Email</label>
                                  </div>  
                                </div>
                              </div>
                          </div>
                      <input type="hidden" name="username" value="13wsdfgrfcvf">
                      <input type="hidden" name="{{ redirect_field_name }}" value="/signup/onboarding/" />
                      <div class="text-dark">
                        <div class="form-group mb-2 position-relative check-valid is-valid">
                              <div class="input-group input-group-lg">
                                  <div class="form-floating">
                                  <input  style="font-size: .8rem;" autocomplete="sedrctvghb" type="password" placeholder="Enter 6 digit password" name="password1" class="form-control border-start-0" id="text-field-hero-input">
                                  <label>Password</label>
                                </div>  
                                </div>
                              </div>
                          </div>
                          <div class="feedback mb-3">
                            <div class="row">
                                <div class="col">
                                    <div class="check-strength" id="checksterngthdisplay">
                                        <div></div>
                                        <div></div>
                                        <div></div>
                                        <div></div>
                                        <div></div>
                                        <div></div>
                                    </div>
                                </div>
                                <div class="col-auto">
                                    <span class="small" id="textpassword"></span>
                                    <i class="bi bi-info-circle text-white ms-1" data-bs-trigger="hover" data-bs-container="body" data-bs-toggle="popover" data-bs-placement="top" data-bs-content="Password should contain atleast 1 capital, 1 alphanumeric & min. 8 characters"></i>
                                </div>
                            </div>
                        </div>            
                      <div class="mb-2 text-dark">
                          <div class="form-group mb-2 position-relative check-valid is-valid">
                              <div class="input-group input-group-lg">
                                  <div class="form-floating">
                                  <input style="font-size: .8rem;" placeholder="Confirm Password" autocomplete="sedrctvghb" name="password2" class="form-control border-start-0" type="password" id="text-field-hero-input">
                                  <label>Confirm Password</label>
                                  </div>
                                  <span class="input-group-text text-secondary  border-end-0" id="viewpassword2"><i class="bi bi-eye"></i></span>
                                  </div>
                              </div>
                          </div>
                          
                          <button class="btn btn-lg btn-theme top-0 end-0 z-index-5 w-100 mt-4" type="submit" id="submitsignup">Signup <i class="bi bi-arrow-right"></i></button>
                  </form>

                  <!-- or continue with options -->
                  <p class="text-white">{% trans "Already have an account?" %} <a href="/accounts/login/" style="color: #0ba0b0"><strong>{% trans "login" %}</strong></a>  {% trans "here." %}</p>
              </div>
          </div>
      </div>

      <div class="col-12 col-sm-8 col-md-6 col-lg-5 col-xl-4 col-xxl-3 mt-auto mb-4">
          <!-- submit button -->
      </div>
  </div>
</main>


<!-- Required jquery and libraries -->
<script src="{% static '/js/jquery-3.3.1.min.js' %}"></script>
<script src="{% static '/js/popper.min.js' %}"></script>
<script src="{% static '/vendor/bootstrap-5/dist/js/bootstrap.bundle.js' %}"></script>

<!-- Customized jquery file  -->
<script src="{% static '/js/main.js' %}"></script>
<script src="{% static '/js/color-scheme.js' %}"></script>


<!-- Chart js script -->
<script src="{% static '/vendor/chart-js-3.3.1/chart.min.js' %}"></script>

<!-- Progress circle js script -->
<script src="{% static '/vendor/progressbar-js/progressbar.min.js' %}"></script>

<!-- swiper js script -->
<script src="{% static '/vendor/swiper-7.3.1/swiper-bundle.min.js' %}"></script>

<script>
  function loadUsername() {
    var username = document.getElementById("id_username").value;

    $.ajax({
      url: '/users/ajax/validate_username/',
      data: {
        'username': username
      },
      dataType: 'json',
      success: function (data) {
        if (true) {
          document.getElementById("user_name").value = data.is_taken;
        }
      }
    });
}
</script>
{% endblock %}